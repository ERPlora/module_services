{% load i18n ui %}

{% if services %}
{% ui_card %}
<ion-list>
    {% for service in services %}
    <ion-item-sliding>
        <ion-item href="{% url 'services:detail' service.pk %}" detail>
            {% if service.icon %}
            <ion-icon slot="start" name="{{ service.icon }}" {% if service.color %}style="color: {{ service.color }}"{% endif %}></ion-icon>
            {% else %}
            <ion-icon slot="start" name="construct-outline" color="primary"></ion-icon>
            {% endif %}
            <ion-label>
                <h2>{{ service.name }}</h2>
                <p>
                    {{ service.category.name|default:_("Uncategorized") }}
                    &bull; {{ service.duration_minutes }} min
                </p>
            </ion-label>
            <ion-note slot="end" class="fw-semibold">{{ service.price }} â‚¬</ion-note>
            {% if not service.is_active %}
            <ion-badge color="medium" slot="end">{% trans "Inactive" %}</ion-badge>
            {% elif service.is_featured %}
            <ion-badge color="warning" slot="end">{% trans "Featured" %}</ion-badge>
            {% endif %}
        </ion-item>

        <ion-item-options side="end">
            <ion-item-option color="primary" href="{% url 'services:edit' service.pk %}">
                {% icon "create-outline" %}
            </ion-item-option>
            <ion-item-option
                color="warning"
                hx-post="{% url 'services:toggle' service.pk %}"
                hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                hx-swap="none"
                hx-on::after-request="location.reload()"
            >
                {% icon "{% if service.is_active %}eye-off-outline{% else %}eye-outline{% endif %}" %}
            </ion-item-option>
            <ion-item-option
                color="danger"
                hx-post="{% url 'services:delete' service.pk %}"
                hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                hx-confirm="{% trans 'Delete this service?' %}"
                hx-swap="none"
                hx-on::after-request="location.reload()"
            >
                {% icon "trash-outline" %}
            </ion-item-option>
        </ion-item-options>
    </ion-item-sliding>
    {% endfor %}
</ion-list>
{% endui_card %}
{% else %}
{% ui_empty_state title=_("No services found") icon="construct-outline" description=_("Create your first service or adjust your filters.") %}
{% endif %}
